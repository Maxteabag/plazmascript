# PlazmaScript Trigger Actions System

## Overview
This project uses an intuitive object-oriented API for game logic, hiding low-level trigger actions behind natural method calls. Users interact with entities and environment through simple, type-safe methods.

**Framework:** .NET 8.0 (upgraded from .NET Core 2.0)
**Language:** C# (latest version)

## Key Documentation
- @~/.claude/oop-game-engine-refactoring.md - Guide for refactoring low-level APIs to intuitive OOP
- @~/.claude/plazmascript-trigger-system.md - Current trigger system architecture and mapping

## Current API Design

### TriggerAction Return Pattern
Entity methods return `TriggerAction` objects that can be added to triggers:

```csharp
// Environment setup
PB2Map.Gravity = 0.4;  // Property setter uses init trigger

// Create triggers and add actions
var setupTrigger = new Trigger("setup");
setupTrigger.AddAction(player.SetHitPoints(75));
setupTrigger.AddAction(player.EnterVehicle(vehicle));
setupTrigger.AddAction(enemy.MoveToRegion(combatZone));

var effectsTrigger = new Trigger("effects");  
effectsTrigger.AddAction(combatZone.MakeDamage(25));
effectsTrigger.AddAction(safeZone.KillEnemiesOf(player));
```

### Design Principles
1. **Return TriggerAction**: Methods return actions, don't execute immediately
2. **Domain-Driven Placement**: Actions belong on the objects they affect
3. **Natural Language**: Method names read intuitively  
4. **Hide Implementation**: Users never see trigger IDs directly
5. **Single Responsibility**: Each trigger ID maps to exactly one method

## Adding New Actions

When adding new trigger actions from `trigger_actions.json`:

1. **Identify Object Owner**: Determine which class should own the action based on what it affects
2. **Create Intuitive Method**: Add method with natural language name to appropriate class
3. **Return TriggerAction**: Method should return TriggerAction object, not execute immediately
4. **Avoid Duplication**: Each trigger ID should exist in exactly one place

Example:
```csharp
// For trigger ID 25: "Make all characters in region 'A' jump"
public TriggerAction MakeAllCharactersJump()  // Add to Region class
{
    return new TriggerAction
    {
        ParameterA = Uid,
        ParameterB = "-1", 
        TriggerId = 25
    };
}

// Usage:
var jumpTrigger = new Trigger("jump_action");
jumpTrigger.AddAction(region.MakeAllCharactersJump());
```